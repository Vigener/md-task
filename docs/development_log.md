# 開発ログ

このプロジェクトの開発過程で発生した問題と、その解決策を記録します。

## 2025-08-12: 環境構築でのトラブルシューティング

### 1. `podman build`時のDNSエラー

- **問題:** `podman build`の実行中に`Could not resolve host`というDNSエラーが発生。
- **原因:** ビルド時に作成されるコンテナが、ホストOS（WSL）のDNS設定を正しく参照できず、名前解決に失敗していた。
- **解決策:** `podman build`コマンドに`--dns=1.1.1.1`オプションを追加し、ビルド中のコンテナに信頼性の高いDNSサーバーを直接指定した。

### 2. `cargo run`時のDNSエラー

- **問題:** `cargo run`で依存関係をダウンロードする際に、再度DNSエラーが発生。
- **原因:** `podman run`で起動したコンテナも、デフォルトでは問題のあるDNS設定を使っていた。`build`と`run`のネットワーク環境は別々だった。
- **解決策:** `podman run`コマンドにも`--dns=1.1.1.1`オプションを追加し、実行時のコンテナにも正しいDNSサーバーを指定した。

### 3. コンテナ内での日本語入力時の文字化け

- **問題:** `podman exec`でコンテナに入り日本語を入力すると文字化けした。
- **原因:** コンテナのOSに日本語の言語パック（ロケール）がインストールされておらず、日本語を正しく表示できなかった。
- **解決策:** `Dockerfile`に`locales`パッケージのインストールと、日本語ロケール（`ja_JP.UTF-8`）を生成・設定する手順を追記した。

### 4. `podman run`のオプション指定位置エラー

- **問題:** `--dns`オプションをイメージ名の後に指定したため、`executable file not found`エラーが発生。
- **原因:** Podmanコマンドでは、オプションは必ずイメージ名の前に指定する必要がある。
- **解決策:** オプションをイメージ名の前に移動させてコマンドを再実行した。